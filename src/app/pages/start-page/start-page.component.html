<h1 class="mt-1">{{ GetWeekDay(0) }}</h1>
<p class="lead">{{ GetDate(0) }}</p>

<div class="row mt-4">
   <div class="card col-10 offset-1 col-md-4 mb-5">
      <div class="card-body">
         <h5 class="card-title">Appointments</h5>
         <ul class="list-group list-group-flush">
            <calendo-appointment-item [appointment]="appointment" *ngFor="let appointment of appointments; let i = index;"></calendo-appointment-item>
            <li class="list-group-item">
               <button type="button" class="btn btn-outline-primary btn-sm" (click)="ShowModal(createAppointmentModal)"><i class="fas fa-plus"></i></button>
            </li>
         </ul>
      </div>
   </div>
   
   <div class="card col-10 offset-1 col-md-4 offset-md-2 mb-5">
      <div class="card-body">
         <h5 class="card-title">Todos</h5>
         <ul class="list-group list-group-flush">
            <calendo-todo-item [todo]="todo" *ngFor="let todo of todos; let i = index;"></calendo-todo-item>
            <li class="list-group-item">
               <button type="button" class="btn btn-outline-primary btn-sm" (click)="ShowModal(createTodoModal)"><i class="fas fa-plus"></i></button>
            </li>
         </ul>
      </div>
   </div>
</div>

<h2>Your Week</h2>

<div class="row">
	<div class="row mt-1 offset-lg-1">
		<div class="card col-10 offset-1 col-lg-5 offset-lg-0 col-xl-3 mx-lg-3 my-3 border border-primary" *ngFor="let i of [1,2,3,4,5,6];">
			<div class="card-body">
				<h5 class="card-title">{{ GetWeekDay(i) }}</h5>
				<h6 class="card-subtitle mb-2 text-muted">{{ GetDate(i) }}</h6>
				
				<div class="card-text text-body" style="font-size: 17px;">
					<ul class="list-group list-group-flush">
						<span *ngIf="GetAppointments(i).length > 0">
							<li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" 
								(click)="ShowOrHideAppointmentsOfDay(i)" style="cursor: pointer;">
								Appointments
								<span class="badge badge-primary badge-pill">{{ appointmentsOfDay.length }}</span>
							</li>
							<!-- Hidden Appointments list -->
							<ul class="list-group list-group-flush ml-3 mt-1" id="appointments-day-{{ i }}" style="display:none">
								<calendo-appointment-item [appointment]="appointment" *ngFor="let appointment of appointmentsOfDay"></calendo-appointment-item>
							</ul>
						</span>

						<span *ngIf="GetTodos(i).length > 0">
							<li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" (click)="ShowOrHideTodosOfDay(i)" style="cursor: pointer;">
								Todos
								<span class="badge badge-primary badge-pill">{{ todosOfDay.length }}</span>
							</li>
							<!-- Hidden Todos list -->
							<ul class="list-group list-group-flush ml-3 mt-1" id="todos-day-{{ i }}" style="display:none">
								<calendo-todo-item [todo]="todo" *ngFor="let todo of todosOfDay;"></calendo-todo-item>
							</ul>
						</span>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>

<ng-template #createAppointmentModal let-c="close" let-d="dismiss">
	<div class="modal-header">
	  	<h4 class="modal-title">New appointment</h4>
	  	<button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
		 	<span aria-hidden="true">&times;</span>
	  	</button>
	</div>
	<div class="modal-body row">
		<ngb-datepicker class="mx-auto" #dp [(ngModel)]="newAppointmentDate" (navigate)="date = $event.next"></ngb-datepicker>

		<div class="mx-auto">
			<label for="createAppointmentStartTime" class="col-form-label mt-3">Start time</label>
			<ngb-timepicker id="createAppointmentStartTime" [disabled]="newAppointmentAllDayCheckboxChecked"
								[(ngModel)]="newAppointmentStartTime" [hourStep]="1" [minuteStep]="15"></ngb-timepicker>
			
			<label for="createAppointmentStartTime" class="col-form-label mt-3">End time</label>
			<ngb-timepicker id="createAppointmentEndTime" [disabled]="newAppointmentAllDayCheckboxChecked"
								[(ngModel)]="newAppointmentEndTime" [hourStep]="1" [minuteStep]="15"></ngb-timepicker>

			<input type="checkbox" id="newAppointmentAllDayCheckbox">
			<label for="newAppointmentAllDayCheckbox" class="col-form-label ml-3">All Day</label>
		</div>

		<div class="mx-auto mt-4" style="width: 250px;">
			<label for="newAppointmentName" class="col-form-label">Name</label>
			<input id="newAppointmentName" class="form-control mx-auto" 
					type="text" placeholder="Appointment name" [(ngModel)]="newAppointmentName" />
		</div>
	</div>
	<div class="modal-footer">
	  	<button type="button" class="btn btn-primary" [disabled]="SetNewAppointmentSaveButtonDisabled()" (click)="c(0)">Save</button>
	</div>
</ng-template>

<ng-template #createTodoModal let-c="close" let-d="dismiss">
	<div class="modal-header">
	  	<h4 class="modal-title">New Todo</h4>
	  	<button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
		 	<span aria-hidden="true">&times;</span>
	  	</button>
	</div>
	<div class="modal-body row">
		<ngb-datepicker class="mx-auto" #dp [(ngModel)]="newTodoDate" (navigate)="date = $event.next"></ngb-datepicker>

		<div class="mx-auto mt-4 col-10 offset-1">
			<label for="newTodoName" class="col-form-label">Name</label>
			<input id="newTodoName" class="form-control" 
					type="text" placeholder="Todo name" [(ngModel)]="newTodoName" />
		</div>
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-primary" [disabled]="newTodoName.length < 2" (click)="c(1)">Save</button>
	</div>
</ng-template>