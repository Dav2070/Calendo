<h1 class="mt-1">{{ dataService.GetWeekDay(0) }}</h1>
<p class="lead">{{ dataService.GetDate(0) }}</p>

<div class="row mt-4">
   <div class="card col-10 offset-1 col-md-4 mb-5">
      <div class="card-body">
         <h5 class="card-title">Appointments</h5>
         <ul class="list-group list-group-flush">
            <calendo-appointment-item [appointment]="appointment" *ngFor="let appointment of dataService.appointmentsOfDays[0]"></calendo-appointment-item>
            <li class="list-group-item">
               <button type="button" class="btn btn-outline-primary btn-sm" (click)="ShowModal(0)"><i class="fas fa-plus"></i></button>
            </li>
         </ul>
      </div>
   </div>
   
   <div class="card col-10 offset-1 col-md-4 offset-md-2 mb-5">
      <div class="card-body">
         <h5 class="card-title">Todos</h5>
         <ul class="list-group list-group-flush">
            <calendo-todo-item [todo]="todo" *ngFor="let todo of dataService.todosOfDays[0]" (delete)="DeleteTodo(todo)"></calendo-todo-item>
            <li class="list-group-item">
               <button type="button" class="btn btn-outline-primary btn-sm" (click)="ShowModal(1)"><i class="fas fa-plus"></i></button>
            </li>
         </ul>
      </div>
   </div>
</div>

<h2>Your Week</h2>

<div class="row">
	<div class="row mt-1 offset-lg-1">
		<div class="card col-10 offset-1 col-lg-5 offset-lg-0 col-xl-3 mx-lg-3 my-3 border border-primary" *ngFor="let i of [1,2,3,4,5,6];">
			<div class="card-body">
				<h5 class="card-title">{{ dataService.GetWeekDay(i) }}</h5>
				<h6 class="card-subtitle mb-2 text-muted">{{ dataService.GetDate(i) }}</h6>
				
				<div class="card-text text-body" style="font-size: 17px;">
					<ul class="list-group list-group-flush">
						<span *ngIf="dataService.appointmentsOfDays[i].length > 0">
							<li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" 
								(click)="ShowOrHideAppointmentsOfDay(i)" style="cursor: pointer;">
								Appointments
								<span class="badge badge-primary badge-pill">{{ dataService.appointmentsOfDays[i].length }}</span>
							</li>
							<!-- Hidden Appointments list -->
							<ul class="list-group list-group-flush ml-3 mt-1" id="appointments-day-{{ i }}" style="display:none">
								<calendo-appointment-item [appointment]="appointment" *ngFor="let appointment of dataService.appointmentsOfDays[i]"></calendo-appointment-item>
							</ul>
						</span>

						<span *ngIf="dataService.GetUncompletedTodosOfDay(i).length > 0">
							<li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" (click)="ShowOrHideTodosOfDay(i)" style="cursor: pointer;">
								Todos
								<span class="badge badge-primary badge-pill">{{ dataService.GetUncompletedTodosOfDay(i).length }}</span>
							</li>
							<!-- Hidden Todos list -->
							<ul class="list-group list-group-flush ml-3 mt-1" id="todos-day-{{ i }}" style="display:none">
								<calendo-todo-item [todo]="todo" *ngFor="let todo of dataService.todosOfDays[i];" (delete)="DeleteTodo(todo)"></calendo-todo-item>
							</ul>
						</span>

						<p class="font-weight-light mt-3" *ngIf="dataService.appointmentsOfDays[i].length == 0 && dataService.GetUncompletedTodosOfDay(i).length == 0">Nothing to do</p>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>

<calendo-new-appointment-modal (save)="CreateAppointment($event)"></calendo-new-appointment-modal>
<calendo-new-todo-modal (save)="CreateTodo($event)"></calendo-new-todo-modal>