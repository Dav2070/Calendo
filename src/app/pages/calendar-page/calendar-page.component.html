<div (window:resize)="onResize()">
   <div id="calendar-top-bar">
      <h3 class="mt-1 ml-3">{{ getCurrentMonth() }} {{ getCurrentYear() }}</h3>
   </div>
   <div id="calendar-label-div" class="position-absolute ml-1">
      <span class="position-absolute" *ngFor="let day of weekDayLabels; let i = index;" [style.margin-left.px]="calendarDayWidth * i">
			<span class="font-weight-light">{{ day }}</span><br>
			<span [style.background-color]="currentDayOfWeek == i ? '#e3e4e5' : ''" 
					[style.padding-left.px]="currentDayOfWeek == i ? 2 : 0"
					[style.padding-right.px]="currentDayOfWeek == i ? 2 : 0"
					(click)="goToWeekday(i)"
					*ngIf="showMobileLayout">{{ currentWeekDays[i] }}</span>
		</span>
   </div>
	<div id="calendarContainer" #calendarContainer 
			[style.height.px]="calendarHeight" 
			[style.width.px]="calendarWidth" 
			style="margin-top: 30px;">
		<div class="d-flex" *ngFor="let week of dataService.desktopCalendarDaysDates; let i = index;">
			<div class="border" *ngFor="let date of week; let j = index;" 
					[style.height.px]="calendarDayHeight" 
					[style.width.px]="calendarDayWidth" 
					[style.background-color]="getDayBackgroundColor(i, j)"
					(click)="dayClicked(date)">
				<span>{{ getDayOfDate(date) }}</span>

				<!-- Render appointments -->
				<ul class="list-group list-group-flush text-truncate">
					<span *ngFor="let appointment of dataService.desktopCalendarDaysAppointments[i][j]; let k = index;">
						<li class="list-group-item p-1 pl-2" *ngIf="k < 2"
							[style.background-color]="getDayBackgroundColor(i, j)">{{ appointment.name }}</li>
					</span>
				</ul>
				<span *ngIf="dataService.desktopCalendarDaysAppointments[i][j].length > 2">...</span>

				<!-- Render todos -->
				<br><span class="badge badge-primary ml-1" *ngIf='dataService.desktopCalendarDaysTodos[i][j].length > 0'>{{ dataService.desktopCalendarDaysTodos[i][j].length }} Todo<span *ngIf="dataService.desktopCalendarDaysTodos[i][j].length > 1">s</span></span>
			</div>
		</div>
	</div>
	<div id="mobileCalendarContainer" #mobileCalendarContainer 
			style="overflow: scroll; margin-top: 60px;" 
			[style.height.px]="calendarHeight" 
			[style.width.px]="calendarWidth">
		<div class="border" *ngFor="let date of dataService.mobileCalendarDaysDates; let i = index;"
				[style.height.px]="calendarDayHeight"
				(click)="dayClicked(date)">
			<span>{{ getFullDayOfDate(date) }}</span>

			<!-- Render appointments -->
			<ul class="list-group list-group-flush text-truncate mt-2">
				<span *ngFor="let appointment of dataService.mobileCalendarDaysAppointments[i]; let k = index;">
					<li class="list-group-item p-1 pl-2" *ngIf="k < 2" 
						style="border: 0 none;">{{ appointment.allday ? '' : getTimeOfDate(appointment.start) }} {{ appointment.name }}</li>
				</span>
			</ul>
			<span class="badge badge-secondary ml-1" *ngIf="dataService.mobileCalendarDaysAppointments[i].length > 2">+{{ dataService.mobileCalendarDaysAppointments[i].length - 2 }} appointment<span *ngIf="dataService.mobileCalendarDaysAppointments[i].length > 3">s</span></span>

			<!-- Render todos -->
			<span class="badge badge-primary ml-1" *ngIf='dataService.mobileCalendarDaysTodos[i].length > 0'>{{ dataService.mobileCalendarDaysTodos[i].length }} Todo<span *ngIf="dataService.mobileCalendarDaysTodos[i].length > 1">s</span></span>
		</div>
	</div>
</div>